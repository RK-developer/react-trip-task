{"ast":null,"code":"var _jsxFileName = \"/Users/karthik-6018/Documents/karthick/task/trip/src/components/cardEditForm/index.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Form, Input, Button, message } from 'antd';\nimport { connect } from \"react-redux\";\nimport apiRequest from \"../../apiRequest\";\n\nconst CardEditForm = props => {\n  const [form] = Form.useForm();\n  const [formLayout, setFormLayout] = useState('horizontal');\n\n  const onFinish = values => {\n    console.log('Success:', values);\n    console.log('currentEditId: ', props.currentEditId);\n    let CardEditValue = {\n      activeId: props.currentEditId.id,\n      values: {\n        destination: values.destination,\n        comment: values.comments\n      }\n    },\n        newTripAllData = [...props.tripDatas];\n    props.setCardModalSpin(true);\n    apiRequest.updateTripData(props.urls, CardEditValue).then(results => {\n      //props.updateTripData(results.data);\n      let curentObj = newTripAllData[props.currentEditId.index];\n      console.log('results: ', results);\n      console.log('before: ', curentObj);\n\n      if (curentObj.id == results.data.id) {\n        Object.assign(curentObj, results.data);\n        console.log('after: ', newTripAllData[props.currentEditId.index]);\n        props.updateTripData(newTripAllData);\n      }\n\n      message.success(\"Card Updated successfully\");\n      props.setCardModalVisible(false);\n      props.setCardModalSpin(false);\n    }).catch(error => {\n      message.error(\"Something went wrong, Card not updated\");\n      props.setCardModalVisible(true);\n      props.setCardModalSpin(false);\n    });\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const formItemLayout = formLayout === 'horizontal' ? {\n    labelCol: {\n      span: 4\n    },\n    wrapperCol: {\n      span: 14\n    }\n  } : null;\n  const buttonItemLayout = formLayout === 'horizontal' ? {\n    wrapperCol: {\n      span: 14,\n      offset: 4\n    }\n  } : null;\n  useEffect(() => {\n    let carIndex = props.currentEditId.index;\n    form.setFieldsValue({\n      destination: props.tripDatas[carIndex].destination,\n      comments: props.tripDatas[carIndex].comment\n    });\n  }, [props]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, Object.assign({}, formItemLayout, {\n    layout: formLayout,\n    form: form,\n    id: \"cardEditForm\",\n    name: \"cardEditForm\",\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Destination\",\n    name: \"destination\",\n    rules: [{\n      required: true,\n      message: 'Please enter destination!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Destination\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Comments\",\n    name: \"comments\",\n    rules: [{\n      required: true,\n      message: 'Please enter comments!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    urls: state.url,\n    tripDatas: state.allTripDatas,\n    currentEditId: state.currentEditId\n  };\n};\n\nconst mapDispacthToProps = dispatch => {\n  return {\n    updateTripData: values => {\n      dispatch({\n        type: \"TRIPDATA\",\n        value: values\n      });\n    },\n    updateActiveId: values => {\n      dispatch({\n        type: \"ACTIVEID\",\n        value: values\n      });\n    },\n    updateActiveRow: values => {\n      dispatch({\n        type: \"ACTIVEROW\",\n        value: values\n      });\n    },\n    updateCurrentEditId: values => {\n      dispatch({\n        type: \"CURRENTEDITID\",\n        value: values\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispacthToProps)(CardEditForm);","map":{"version":3,"sources":["/Users/karthik-6018/Documents/karthick/task/trip/src/components/cardEditForm/index.jsx"],"names":["React","useState","useEffect","Form","Input","Button","message","connect","apiRequest","CardEditForm","props","form","useForm","formLayout","setFormLayout","onFinish","values","console","log","currentEditId","CardEditValue","activeId","id","destination","comment","comments","newTripAllData","tripDatas","setCardModalSpin","updateTripData","urls","then","results","curentObj","index","data","Object","assign","success","setCardModalVisible","catch","error","onFinishFailed","errorInfo","formItemLayout","labelCol","span","wrapperCol","buttonItemLayout","offset","carIndex","setFieldsValue","required","mapStateToProps","state","url","allTripDatas","mapDispacthToProps","dispatch","type","value","updateActiveId","updateActiveRow","updateCurrentEditId"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from \"react\";\nimport { Form, Input, Button, message } from 'antd';\nimport { connect } from \"react-redux\";\nimport apiRequest from \"../../apiRequest\";\n\nconst CardEditForm = (props) => {\n    const [form] = Form.useForm();\n    const [formLayout, setFormLayout] = useState('horizontal');\n\n\n    const onFinish = values => {\n        console.log('Success:', values);\n        console.log('currentEditId: ', props.currentEditId);\n        let CardEditValue = {\n            activeId: props.currentEditId.id, \n            values: {\n                destination: values.destination,\n                comment: values.comments\n            }\n        },\n        newTripAllData = [...props.tripDatas];\n        props.setCardModalSpin(true);\n        apiRequest.updateTripData(props.urls,CardEditValue).then((results) => {\n            //props.updateTripData(results.data);\n            let curentObj = newTripAllData[props.currentEditId.index];\n            console.log('results: ', results);\n            console.log('before: ', curentObj);\n            if(curentObj.id == results.data.id) {\n                Object.assign(curentObj, results.data)\n                console.log('after: ', newTripAllData[props.currentEditId.index]);\n                props.updateTripData(newTripAllData) ;\n            }\n            \n            message.success(\"Card Updated successfully\");\n            props.setCardModalVisible(false);\n            props.setCardModalSpin(false);\n        }).catch(error => {\n            message.error(\"Something went wrong, Card not updated\");\n            props.setCardModalVisible(true);\n            props.setCardModalSpin(false);\n        })\n\n      };\n    \n      const onFinishFailed = errorInfo => {\n        console.log('Failed:', errorInfo);\n      };\n\n    const formItemLayout =\n    formLayout === 'horizontal'\n      ? {\n          labelCol: {\n            span: 4,\n          },\n          wrapperCol: {\n            span: 14,\n          },\n        }\n      : null;\n  const buttonItemLayout =\n    formLayout === 'horizontal'\n      ? {\n          wrapperCol: {\n            span: 14,\n            offset: 4,\n          },\n        }\n      : null;\n\n    useEffect(() => {\n        let carIndex = props.currentEditId.index\n        form.setFieldsValue({\n            destination: props.tripDatas[carIndex].destination,\n            comments: props.tripDatas[carIndex].comment\n        })\n    }, [props])\n    return (\n        <div>\n            <Form\n                {...formItemLayout}\n                layout={formLayout}\n                form={form}\n                id=\"cardEditForm\"\n                name=\"cardEditForm\"\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n            >\n                <Form.Item \n                label=\"Destination\"\n                name=\"destination\"\n                rules={[{ required: true, message: 'Please enter destination!' }]}\n                >\n                <Input placeholder=\"Destination\" />\n                </Form.Item>\n                \n                <Form.Item \n                label=\"Comments\"\n                name=\"comments\"\n                rules={[{ required: true, message: 'Please enter comments!' }]}\n                >\n                <Input placeholder=\"Comments\" />\n                </Form.Item>\n            </Form>\n        </div>\n    )\n};\n\n\nconst mapStateToProps = state => {\n    return {\n      urls: state.url,\n      tripDatas: state.allTripDatas,\n      currentEditId: state.currentEditId\n    };\n  };\n  const mapDispacthToProps = dispatch => {\n    return {\n      updateTripData: values => {\n        dispatch({ type: \"TRIPDATA\", value: values });\n      },\n      updateActiveId: values => {\n        dispatch({ type: \"ACTIVEID\", value: values })\n      },\n      updateActiveRow: values => {\n        dispatch({type: \"ACTIVEROW\",value: values});\n      },\n      updateCurrentEditId: values => {\n        dispatch({ type: \"CURRENTEDITID\",value: values })\n      }\n    };\n  };\n  export default connect(\n    mapStateToProps,\n    mapDispacthToProps\n  )(CardEditForm);"]},"metadata":{},"sourceType":"module"}